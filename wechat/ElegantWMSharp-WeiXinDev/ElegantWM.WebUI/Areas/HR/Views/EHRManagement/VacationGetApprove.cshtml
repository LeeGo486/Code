@{
    ViewBag.Title = "获取休假审批数据";
    Layout = "~/Views/Shared/_HRWeiXinLayout.cshtml";
}

@section script{
    <link href="~/Areas/HR/Resources/css/HR.css?v3" rel="stylesheet" />

    <script type="text/javascript">
        $(function () {
            //$("#dav").css("background-color", "#000").css("border-bottom", "2px solid red");
            //$("#dpay").css("background-color", "#2c3e50").css("border-bottom", "")
        });
        //确定提交
        function VacationApproveSubmit(c_remark, c_approveflowid, c_oid_vocationapply, vacationtype) {

            var dataApproveSubmit = {
                c_remark: c_remark,
                c_approveflowid: c_approveflowid,
                c_oid_vocationapply: c_oid_vocationapply,
                vacationtype: vacationtype
            };
            Msg.show("提交中请稍后...", 3);
            $.post("/HR/EHRManagement/VacationApproveSubmit", dataApproveSubmit, function (rst) {
                Msg.hide();
                Msg.show(rst.msg, rst.result);
                window.location.reload();
            });
        }
    </script>
}

<div class="ht">
    <i class="icon-wrench"></i>&nbsp;&nbsp;需要我审批的休假单据
</div>


@if (@ViewBag.VacationGetApprove.Rows[0]["c_vocationapplyOid"] == "")
{
    <div id="noEventMsg" class="mainArea" style="min-height: 0px;">
        <i class="icon-info-sign"></i>
        亲，目前没有需要您审批的单据。<br />
        <br />
    </div>
}
else
{
    foreach (System.Data.DataRow dr in ViewBag.VacationGetApprove.Rows)
    {
    <div class="eventSch clearfix">
        <ul class="list-group">
            <li class="list-group-item">
                <span style="color: #969696">姓名：</span>
                <span style="color: #969696">@dr["c_name"] </span>
                <br />
                <span style="color: #969696">开始时间：</span>
                <span style="color: #969696">@dr["c_beginTime"] </span>
                <span style="color: #969696">结束时间：</span>
                <span style="color: #969696">@dr["c_endTime"] </span>
            </li>
            <li class="list-group-item"><span style="color: #969696">原因：</span>@dr["c_reason"]
            </li>
        </ul>
        @*function VacationApproveSubmit(c_remark, c_approveflowid, c_oid_vocationapply, vacationtype) {*@

        <div class="operate">
            <div class="btnOpt" onclick="VacationApproveSubmit('无',@dr["c_approveflow"],'@dr["c_oid_vocationapply"]',1);">
                <i class="icon-signout"></i>&nbsp;审批通过
            </div>
            <div class="btnOpt" onclick="VacationApproveSubmit('无',@dr["c_approveflow"],'@dr["c_oid_vocationapply"]',2);"  
                style="border-right: 1px solid #ccc;">
                <i class="icon-ok"></i>&nbsp;审批驳回
            </div>
        </div>
    </div>
    }
}
