@{
    ViewBag.Title = "恩派雅-集红包送美衣";
    Layout = "~/Views/Shared/_BaseLayout.cshtml";
}

<div class="dataDetail" style="position:relative;">
    @if (ViewBag.TYPE == "J")
    {
        <img class="bg" src="~/Areas/Game/Resources/images/NpaiaWomen/infobgagain.jpg" style="width:100%;"/>
        <div class="infoArea" style="position:absolute;top:18%;padding: 10px;">  
            <div class="input-group">
                <span class="input-group-addon">姓名</span>
                <input type="text" class="form-control name" value="">
            </div>
            <br />
            <div class="input-group">
                <span class="input-group-addon">手机号</span>
                <input type="text" class="form-control tel" value="">
            </div>
            <br />
            <div class="input-group">
                <span class="input-group-addon">身高</span>
                <input type="text" class="form-control height" value="">
                <span class="input-group-addon">CM</span>
            </div>
            <br />
            <div class="input-group">
                <span class="input-group-addon">体重</span>
                <input type="text" class="form-control weight" value="">
                <span class="input-group-addon">KG</span>
            </div>
            <br />
            <div class="input-group">
                <span class="input-group-addon">地址</span>
                <input type="text" class="form-control address" value="">
            </div>
            <br />
            <img class="btn" src="~/Areas/Game/Resources/images/NpaiaWomen/submitagain.png" style="width:60%;" />
        </div>
    }
    else
    {
        <img class="bg" src="~/Areas/Game/Resources/images/NpaiaWomen/infobg2again.jpg" style="width:100%;"/>
        <div class="infoArea" style="position:absolute;top:33%;padding: 10px;">  
            <div class="input-group">
                <span class="input-group-addon">姓名</span>
                <input type="text" class="form-control name" value="">
            </div>
            <br />
            <div class="input-group">
                <span class="input-group-addon">手机号</span>
                <input type="text" class="form-control tel" value="">
            </div>
            <br />
            <div class="input-group">
                <span class="input-group-addon">身高</span>
                <input type="text" class="form-control height" value="">
                <span class="input-group-addon">CM</span>
            </div>
            <br />
            <div class="input-group">
                <span class="input-group-addon">体重</span>
                <input type="text" class="form-control weight" value="">
                <span class="input-group-addon">KG</span>
            </div>
            <br />
            <div class="input-group">
                <span class="input-group-addon">地址</span>
                <input type="text" class="form-control address" value="">
            </div>
            <br />
            <img class="btn" src="~/Areas/Game/Resources/images/NpaiaWomen/submitagain.png" style="width:60%;" />
        </div>
    }
    
</div>
<script type="text/javascript">
    var flag = false;
    $(".btn").click(function () {
        if ($(".name").val() == "") {
            Msg.show("请输入姓名", 1);
            return;
        }
        if ($(".tel").val() == "") {
            Msg.show("请输入手机号", 1);
            return;
        }
        if ($(".height").val() == "") {
            Msg.show("请输入身高", 1);
            return;
        }
        if ($(".weight").val() == "") {
            Msg.show("请输入体重", 1);
            return;
        }
        if ($(".address").val() == "") {
            Msg.show("请输入地址", 1);
            return;
        }

        //构造提交json的格式
        var paramData = {
            Oid: Url.get("oid"),
            Name: $(".name").val(),
            Tel: $(".tel").val(),
            Height: $(".height").val(),
            Weight: $(".weight").val(),
            Address: $(".address").val()
        };

        if (flag) {
            return;
        }
        else {
            flag = true;
            Msg.show("提交中...", 3);
            $.post("/Game/NpaiaWomen/Submit?sid=" + Url.get("sid") + "&oid=" + Url.get("oid"), paramData, function (rst) {
                Msg.hide();
                if (rst.result == 1 && rst.msg == "later") {
                    window.location.href = "/Game/NpaiaWomen/Winning?sid=" + Url.get("sid") + "&oid=" + Url.get("oid");
                    return;
                }

                Msg.show(rst.msg, rst.result);

                if (rst.result == 0) {
                    window.location.href = "/Game/NpaiaWomen/Winning?sid=" + Url.get("sid") + "&oid=" + Url.get("oid");
                } else {
                    flag = false;
                }
            });
        }
    })
</script>
