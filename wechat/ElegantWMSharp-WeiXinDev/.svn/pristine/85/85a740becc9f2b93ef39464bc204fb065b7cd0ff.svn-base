function wxReady(e){if(window.WeixinJSBridge)e&&e();else{var t=setTimeout(function(){window.WeixinJSBridge&&e&&e()},1e3);document.addEventListener("WeixinJSBridgeReady",function(){clearTimeout(t),e&&e()})}}function FastClick(e,t){"use strict";function i(e,t){return function(){return e.apply(t,arguments)}}var n;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=e,this.tapDelay=t.tapDelay||200,!FastClick.notNeeded(e)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],r=this,a=0,s=o.length;s>a;a++)r[o[a]]=i(r[o[a]],r);deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,i.hijacked||i,n):o.call(e,t,i,n)},e.addEventListener=function(t,i,n){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):o.call(e,t,i,n)}),"function"==typeof e.onclick&&(n=e.onclick,e.addEventListener("click",function(e){n(e)},!1),e.onclick=null)}}function needConfirm(e,t,i){var n=window.confirm(e);n?t&&"function"==typeof t&&t.apply():i&&"function"==typeof i&&i.apply()}!function(e,t,i){"use strict";function n(t){this.settings=e.extend({},r,t),this._defaults=r,this._name=o,this.init()}var o="Fullguide",r={followSelector:"#js-follow-guide",favSelector:"#js-fav-guide",shareSelector:"#js-share-guide",followTpl:function(e){e=e||{};var t=['<div id="js-follow-guide" class="js-fullguide fullscreen-guide follow-guide hide"><span class="js-close-guide guide-close">&times;</span><div class="guide-inner"><div class="step step-2"></div><div class="wxid"><strong>',e.mp_weixin,'</strong></div><div class="step step-3"></div></div></div>'];return t.join("")},goodsFollowTpl:function(e){e=e||{};var t=['<div id="js-follow-guide" class="js-fullguide fullscreen-guide follow-guide hide"><span class="js-close-guide guide-close">&times;</span><div class="guide-inner"><h3 class="guide-inner-title">你需要关注后才能购买</h3><div class="step step-2"></div><div class="wxid"><strong>',e.mp_weixin,'</strong></div><div class="step step-3"></div></div></div>'];return t.join("")},goodsQuickSubscribeTpl:function(e){e=e||{};var t=['<div id="js-follow-guide" class="js-fullguide fullscreen-guide follow-guide hide"><div class="quick-subscribe js-quick-subscribe"><h2>请先关注后再购买，享受更好的服务~</h2><div><a class="btn" href="',e.quick_subscribe_url,'">去关注</a ></div></div></div>'];return t.join("")},favTpl:function(){return'<div id="js-fav-guide" class="js-fullguide fullscreen-guide fav-guide hide"><span class="guide-close">&times;</span><span class="guide-arrow"></span><div class="guide-inner"><div class="step step-1"></div><div class="step step-2"></div></div></div>'},pc:function(e){e=e||{};var t=['<div id="js-share-guide" class="js-fullguide fullscreen-guide hide" style="font-size: 20px; line-height: 30px; color: #fff; text-align: center;"> <span class="js-close-guide guide-close">&times;</span> <div class="guide-inner"> 通过微信【扫一扫】功能<br/>扫描二维码关注我们<img style="width:160px; height: 160px;margin-top: 20px;" src="http://open.weixin.qq.com/qr/code/?username=',e.mp_weixin,'" alt="',e.mp_weixin,'"> </div> </div> '];return t.join("")},shareTpl:function(){return'<div id="js-share-guide" class="js-fullguide fullscreen-guide hide" style="font-size: 16px; line-height: 35px; color: #fff; text-align: center;"><span class="js-close-guide guide-close">&times;</span><span class="guide-arrow"></span><div class="guide-inner">请点击右上角<br/>通过【发送给朋友】功能<br>或【分享到朋友圈】功能<br>把消息告诉小伙伴哟～</div></div>'}},a=t._global;n.prototype={init:function(){var e=this;e.setConfig(),e._init()},_init:function(){var t=this;t.canQuickSubscribe=e("html").hasClass("wx_mobile")&&a.mp_data&&+a.mp_data.quick_subscribe,t.initTemplates(),t.bindUIActions()},setConfig:function(t){var i=this;i.config=e.extend({},i.settings,t)},bindUIActions:function(){var t=this;t.followActions(),t.favActions(),t.shareActions();var n=e(i.documentElement);n.on("click",".js-fullguide",function(){e(this).addClass("hide")}),n.on("fullguide:show",function(e,i){t.show(i)}),n.on("click",".js-quick-subscribe",function(e){e.stopPropagation()})},followActions:function(){var t=this,n=e(i.documentElement);n.on("click",".js-open-follow",function(e){e.preventDefault(),t.show("follow")}),n.on("click",".wxid",function(e){e.stopPropagation()})},favActions:function(){var t=this,n=e(i.documentElement);n.on("click",".js-open-fav",function(e){e.preventDefault(),t.show("fav")})},shareActions:function(){var t=this,n=e(i.documentElement);n.on("click",".js-open-share",function(e){e.preventDefault(),t.show("share")})},initTemplates:function(){var e=this;e.followTemplate=a.is_mobile?a&&"Showcase_Goods_Controller"===a.controller?e.canQuickSubscribe?e.config.goodsQuickSubscribeTpl:e.config.goodsFollowTpl:e.config.followTpl:e.config.pc,e.favTemplate=e.config.favTpl,e.shareTemplate=e.config.shareTpl},followRender:function(t){t=t||{};var i,n=this,o=a.mp_data;return o?!t.goods&&n.canQuickSubscribe?void n.goToQuickSubscribePage():(e(n.config.followSelector).length?n.followEle=e(n.config.followSelector):(i=n.followTemplate(o),n.followEle=e(i).appendTo("body")),n.followEle):void 0},favRender:function(){var t,i=this;return e(i.config.favSelector).length?i.favEle=e(i.config.favSelector):(t=i.favTemplate(),i.favEle=e(t).appendTo("body")),i.favEle},shareRender:function(){var t,i=this;return e(i.config.shareSelector).length?i.shareEle=e(i.config.shareSelector):(t=i.shareTemplate(),i.shareEle=e(t).appendTo("body")),i.shareEle},show:function(e,t){var i=this,n=i[e+"Ele"];n||(n=i[e+"Render"](t)),n.removeClass("hide")},goToQuickSubscribePage:function(){t.location.href=a.mp_data.quick_subscribe_url}},t.fullguide=t.fullguide||new n}(window.$,window,document),function(){var e=window._global.share||{},t=function(e){return 0===e.indexOf("http://imgqn.koudaitong.com")||0===e.indexOf("http://imgqntest.koudaitong.com")?e.replace(/(\![0-9]+x[0-9]+.+)/g,"")+"!200x200.jpg":e},i=function(){var e="http://static.koudaitong.com/v2/image/wap/logo.png",i=$("#wxcover"),n=null;return i&&i.length>0?(n=i.data("wxcover"),n&&0!==n.length||(n=i.css("background-image"),n&&"none"!=n?(n=/^url\((['"]?)(.*)\1\)$/.exec(n),n=n?n[2]:null):n=null)):(i=$(".content img")[0],i&&(n=i.getAttribute("src")||i.getAttribute("data-src"))),t(n||(window._global.mp_data||{}).logo||e)},n=function(){var e=window._global.current_page_link||document.documentURI,t=Number(window._global.kdt_id)||0,i="shop"+(192168+t);if(-1!==e.indexOf("open.weixin.qq.com")){e=decodeURIComponent(e);var n=e.match(/redirect_uri\=(.*?)[\&|\$]/i);if(!n)return!1;n.length>1&&n[1]&&-1===n[1].indexOf("/x/")&&(n=e.match(/state=(.*?)[\#|\&|\$]/i)),e=n.length>1?n[1]:!1}return t>0&&(e=e.replace("://wap.","://"+i+".")),e},o=function(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},i=/(\&amp;|\&lt;|\&gt;|\&quot;|\&#x27;)/g;return(""+e).replace(i,function(e){return t[e]})},r=function(){var t=e.title||window._global.title||document.title,r=e.link||n(),a=e.cover||i(),s=(e.desc||$("#wxdesc").val()||$("#wxdesc").text()||$(".custom-richtext").text()||$(".content-body").text()||t||"").replace(/\s*/g,""),l=function(e,t){var i=e.split("?");if(i.length>=2){for(var n=encodeURIComponent(t)+"=",o=i[1].split(/[&;]/g),r=o.length;r-->0;)-1!==o[r].lastIndexOf(n,0)&&o.splice(r,1);return e=i[0]+"?"+o.join("&")}return e};return r=l(r,"redirect_count"),function(){var e,i=$(".time-line-title");return i.length>0&&(e=i.val()||i.text()),{title:o(t),link:r,img_url:a,desc:o(s).substring(0,80),img_width:"200",img_height:"200",timeLineTitle:o((e||"").trim())}}}();wxReady(function(){var t=window.WeixinJSBridge;t&&(t.call(e.notShare?"hideOptionMenu":"showOptionMenu"),t.call(window._global.js.hide_wx_nav?"hideToolbar":"showToolbar"),t.on("menu:share:timeline",function(){if(!e.notShare){window.doWhileShare&&window.doWhileShare();var i=r();i.timeLineTitle&&(i.title=i.timeLineTitle),t.invoke("shareTimeline",i,function(){})}}),t.on("menu:share:appmessage",function(){e.notShare||(window.doWhileShare&&window.doWhileShare(),t.invoke("sendAppMessage",r(),function(){}))}))})}();var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},FastClick.prototype.determineEventType=function(e){"use strict";return deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){"use strict";var t;deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t,i;if(t=e.fastClickScrollParent,!t||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,i,n;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1},FastClick.prototype.onTouchMove=function(e){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,i,n,o,r,a=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(r=e.changedTouches[0],a=document.elementFromPoint(r.pageX-window.pageXOffset,r.pageY-window.pageYOffset)||a,a.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=a.tagName.toLowerCase(),"label"===n){if(t=this.findControl(a)){if(this.focus(a),deviceIsAndroid)return!1;a=t}}else if(this.needsFocus(a))return e.timeStamp-i>100||deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(a),this.sendClick(a,e),deviceIsIOS&&"select"===n||(this.targetElement=null,e.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(o=a.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(a)||(e.preventDefault(),this.sendClick(a,e)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){"use strict";var t,i,n;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&(n=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),n[1]>=10&&n[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e,t){"use strict";return new FastClick(e,t)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,window.addEventListener("load",function(){FastClick.attach(document.body)},!1),document.addEventListener("click",function(){},!0),function(e){e.kdt=e.kdt||{},e.extend(e.kdt,{getFormData:function(t){var i=t.serializeArray(),n={};return e.map(i,function(e){n[e.name]=e.value}),n},spm:function(){var t=e.kdt.getParameterByName("spm");if(t=e.trim(t),""!==t){var i=t.split("_");i.length>2&&(t=i[0]+"_"+i[i.length-1]),window._global.spm.logType&&window._global.spm.logId&&(t+="_"+window._global.spm.logType+window._global.spm.logId)}else t=window._global.spm.logType+window._global.spm.logId||"";return t},isIOS:function(){return/(iPhone|iPad|iPod)/i.test(navigator.userAgent)?!0:!1},isAndroid:function(){return/Android/i.test(navigator.userAgent)?!0:!1},isWeixin:function(){return e.kdt._weixinEle=e.kdt._weixinEle||e(document.documentElement),e.kdt._weixinEle.hasClass("wx_mobile")},isIPad:function(){return/iPad/i.test(navigator.userAgent)?!0:!1},isMobile:function(){return window._global.is_mobile},isWifi:!1,isCellular:!1,getParameterByName:function(e){e=e.replace(/[[]/,"\\[").replace(/[]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),n=i.exec(window.location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},removeParameter:function(e,t){var i=e.split("?");if(i.length>=2){for(var n=encodeURIComponent(t)+"=",o=i[1].split(/[&;]/g),r=o.length;r-->0;)-1!==o[r].lastIndexOf(n,0)&&o.splice(r,1);return e=i[0]+"?"+o.join("&")}return e},addParameter:function(t,i){if(!t||0===t.length||0===e.trim(t).indexOf("javascript"))return"";var n=t.split("#");t=n[0];for(var o in i)if(i.hasOwnProperty(o)){if(""===e.trim(i[o]))continue;if(t.indexOf("?")<0)t+="?"+e.trim(o)+"="+e.trim(i[o]);else{var r={},a=t.split("?");e.each(a[1].split("&"),function(t,i){var n=i.split("=");""!==e.trim(n[1])&&(r[n[0]]=n[1])}),e.each(i,function(t,i){""!==e.trim(i)&&(r[t]=i)});var s=[];e.each(r,function(e,t){s.push(e+"="+t)}),t=a[0]+"?"+s.join("&")}}return 2===n.length&&(t+="#"+n[1]),t},log:function(t,i){var n=new Image,o=Math.floor(2147483648*Math.random()).toString(36),r="log_"+o;window[r]=n,n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,window[r]=null,n=null,i===Object(i)&&e.isFunction(i.resolve)&&i.resolve()},n.src=e.kdt.addParameter(t,{time:(new Date).getTime()}),window.setTimeout(function(){i===Object(i)&&e.isFunction(i.resolve)&&i.resolve()},1500)},getTaobaoModal:function(){return e.kdt._taobaoEle=e.kdt._taobaoEle||e("#js-fuck-taobao"),e.kdt._taobaoEle},fuckTaobao:function(t){return(e.kdt.isIOS()||e.kdt.isAndroid())&&e.kdt.isWeixin()&&(t.indexOf("taobao.com")>=0||t.indexOf("tmall.com")>=0)},openModal:function(){this._opened||(e.kdt.isIOS()?(e.kdt.getTaobaoModal().find(".js-step-2").addClass("step-2"),this._opened=!0):e.kdt.isAndroid()&&(e.kdt.getTaobaoModal().find(".js-step-2").addClass("step-and-2"),this._opened=!0)),e.kdt.getTaobaoModal().removeClass("hide")},openLink:function(t,i){if(void 0!==t&&null!==t){if(e.kdt.fuckTaobao(t))return e.kdt.openModal();if(i=i||!1){var n=window.open(t,"_blank");n.focus()}else location.href=t}}})}($),function(){$.kdt.getTaobaoModal().on("click",function(e){e.target.className.indexOf("step-")<0&&$.kdt.getTaobaoModal().addClass("hide")})}(),$(function(){wxReady(function(){window.WeixinJSBridge&&"function"===(typeof window.WeixinJSBridge.invoke).toLowerCase()&&window.WeixinJSBridge.invoke("getNetworkType",{},function(e){var t=$.trim(e.err_msg);"network_type:wifi"===t&&($(document.documentElement).addClass("wifi"),$.kdt.isWifi=!0),("network_type:edge"===t||"network_type:wwan"===t)&&($.kdt.isCellular=!0);var i={spm:$.kdt.spm(),fm:"display_network",referer_url:encodeURIComponent(document.referrer),title:_global.title||$.trim(document.title),msg:encodeURIComponent(t)},n=$.kdt.addParameter(_global.logURL,i);$.kdt.log(n)})})}),function(e,t,i,n){var o=e(t);e.fn.lazyload=function(r){function a(){var t=0;l.each(function(){var i=e(this);if(!c.skip_invisible||i.is(":visible"))if(e.abovethetop(this,c)||e.leftofbegin(this,c));else if(e.belowthefold(this,c)||e.rightoffold(this,c)){if(++t>c.failure_limit)return!1}else i.trigger("appear"),t=0})}var s,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"fadeIn",container:t,data_attribute:"src",skip_invisible:!1,appear:null,load:null,placeholder:null};return r&&(n!==r.failurelimit&&(r.failure_limit=r.failurelimit,delete r.failurelimit),n!==r.effectspeed&&(r.effect_speed=r.effectspeed,delete r.effectspeed),e.extend(c,r)),s=c.container===n||c.container===t?o:e(c.container),0===c.event.indexOf("scroll")&&s.bind(c.event,function(){return a()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,(i.attr("src")===n||i.attr("src")===!1)&&i.is("img")&&c.placeholder&&i.attr("src",c.placeholder),i.one("appear",function(){if(!this.loaded){if(c.appear){var n=l.length;c.appear.call(t,n,c)}e("<img />").bind("load",function(){var n=i.attr("data-"+c.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image",'url("'+n+'")'),i[c.effect](c.effect_speed),t.loaded=!0;var o=e.grep(l,function(e){return!e.loaded});if(l=e(o),c.load){var r=l.length;c.load.call(t,r,c)}}).attr("src",i.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&i.bind(c.event,function(){t.loaded||i.trigger("appear")})}),o.bind("resize",function(){a()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){a()}),this},e.belowthefold=function(i,r){var a;return a=r.container===n||r.container===t?(t.innerHeight?t.innerHeight:o.height())+o.scrollTop():e(r.container).offset().top+e(r.container).height(),a<=e(i).offset().top-r.threshold},e.rightoffold=function(i,r){var a;return a=r.container===n||r.container===t?o.width()+o.scrollLeft():e(r.container).offset().left+e(r.container).width(),a<=e(i).offset().left-r.threshold},e.abovethetop=function(i,r){var a;return a=r.container===n||r.container===t?o.scrollTop():e(r.container).offset().top,a>=e(i).offset().top+r.threshold+e(i).height()},e.leftofbegin=function(i,r){var a;return a=r.container===n||r.container===t?o.scrollLeft():e(r.container).offset().left,a>=e(i).offset().left+r.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}($,window,document),function(){function e(e){"undefined"!=typeof window.WeixinJSBridge&&window.WeixinJSBridge.invoke("imagePreview",{current:e,urls:w})}var t=$.kdt.spm();$.kdt.clickLogHandler=function(e){function i(){var i=$.Deferred().done(function(){($.kdt.isMobile()||!r)&&$.kdt.openLink(l)}),n={spm:t,fm:"click",url:window.encodeURIComponent(o),referer_url:encodeURIComponent(document.referrer),title:$.trim(s)};e.fromMenu&&$.extend(n,{click_type:"menu"}),null!==a&&void 0!==a&&$.extend(n,{click_id:a});var c=$.kdt.addParameter(_global.logURL,n);$.kdt.log(c,i)}var n=$(this),o=n.attr("href"),r="_blank"===n.attr("target"),a=n.data("goods-id"),s=n.prop("title")||n.text();if(""!==$.trim(o)&&0!==$.trim(o).indexOf("javascript")&&!n.hasClass("js-no-follow")){var l=o;o.match(/^https?:\/\/\S*\.?(koudaitong\.com|kdt\.im|youzan\.com)/)&&(l=$.kdt.addParameter(o,{spm:t})),i(),$.kdt.isMobile()||!r?e.preventDefault():n.attr("href",l)}},$(document).on("click","a",$.kdt.clickLogHandler);var i=function(){var e=[],t=$(".js-goods");return t.length<1?null:(t.each(function(t,i){var n=$(i);e.push(n.data("goods-id"))}),e.join(","))}(),n={spm:t,fm:"display",referer_url:encodeURIComponent(document.referrer),title:_global.title||$.trim(document.title)};i&&$.extend(n,{display_goods:i});var o=$.kdt.addParameter(_global.logURL,n);$.kdt.log(o),$(".js-lazy").lazyload({threshold:200}),$(".js-goods-lazy").lazyload({threshold:200,appear:function(){var e,i=$(this).parents(".js-goods").first().data("goods-id");e=t.lastIndexOf("_")===t.length-1?t+"SI"+i:t+"_SI"+i,$.kdt.log($.kdt.addParameter(_global.logURL,{spm:e,fm:"display",referer_url:encodeURIComponent(document.referrer)}))}});var r=$(document.documentElement),a=$(".js-mp-info"),s=window.navigator.userAgent,l=s.match(/MicroMessenger\/(\d+(\.\d+)*)/),c=null!==l&&l.length,d=c?l[1]:"",u=d.split("."),f=[5,2,0],h=!0;for(var p in f){if(!u[p])break;if(parseInt(u[p])<f[p]){h=!0;break}if(parseInt(u[p])>f[p]){h=!1;break}}var g=$.kdt.isAndroid()&&$.kdt.isWeixin()&&h;g||a.on("click",".js-follow-mp",function(){return r.trigger("fullguide:show","follow"),!1}),function(){var e=$(".custom-image-swiper"),t=e.find(".swiper-container"),i=e.width();i>320&&t.each(function(e,t){var n=$(t),o=n.height(),r=i/320*o;n.height(r).find(".swiper-slide a").height(r).find("img").css({"max-height":r,"max-width":i})})}(),$(".custom-image-swiper").each(function(e,t){var i=$(t),n=i.find(".swiper-container"),o=i.find(".swiper-pagination"),r={mode:"horizontal",pagination:o[0],paginationClickable:!0,calculateHeight:!0,autoplay:3500,updateOnImagesReady:!1,onFirstInit:function(){var e=i.find(".js-slide-lazy");e.each(function(){var e=$(this);e.attr("src",e.data("src"))})},onTouchStart:function(e){e.stopAutoplay()},onTouchEnd:function(e){e.startAutoplay()}};n.find(".swiper-slide").length>1&&new Swiper(n[0],r)});var m=s.match(/MicroMessenger\/(\d+(\.\d+)*)/);if(null!==m&&m.length){var v=$(".js-image-swiper img, .custom-richtext img"),w=[],k=0;v.each(function(){var t=$(this),i=t.attr("data-src")||t.attr("src");if(t.width()>=k&&i){if(t.parents("a").length>0)return;w.push(i),t.on("click",function(){e(i)})}})}}($,window,document),function(e){function t(e){return""===e.phone?(n.find('input[name="phone"]').focus(),motify.log("请填写您的手机号码"),!1):/^1\d{10}$/.test(e.phone)?""===e.password?(n.find('input[name="password"]').focus(),motify.log("麻烦输入一下您的密码吧"),!1):e.password.length>16?(n.find('input[name="password"]').focus(),motify.log("亲，密码太长了，怕您记不住，还是短一点啦"),!1):!0:(n.find('input[name="phone"]').focus(),motify.log("请填写11位手机号码"),!1)}var i=e(".js-modal-login");e.extend(e.kdt,{login:function(t){i.length<=0||(i.addClass("active"),e.isFunction(t)&&(e.kdt._loginCB=t))}});var n=e(".js-login-form"),o=n.attr("action"),r=n.find(".js-login-pwd"),a=n.find(".js-submit-butn"),s=i.find(".js-login-title span"),l=i.find(".js-forget-password"),c=i.find(".js-login-mode");n.on("blur",".js-login-phone",function(){var t,i=e(this),n=e.trim(i.val()),o=l.attr("href");n=/^1\d{10}$/.test(n)?n:"",t=/^1\d{10}$/.test(n)?e.kdt.addParameter(o,{phone:n}):e.kdt.removeParameter(o,"phone"),l.attr("href",t)}),n.on("click",".js-login-cancel",function(){i.length>0?i.removeClass("active"):window.history.back()}),n.on("click",".js-login-mode",function(){var t=e(this),i=t.data("login-mode");"signin"===i?(s.html("请先登录"),t.html("(注册)"),r.attr("placeholder","请填写您的密码"),t.data("login-mode","signup")):(s.html("请先注册"),t.html("(登录)"),r.attr("placeholder","请设置您的密码"),t.data("login-mode","signin"))}),n.on("submit",function(r){r.preventDefault();var s=e.kdt.getFormData(n);return s.mode=c.data("login-mode"),t(s)?void e.ajax({url:o,type:"GET",dataType:"jsonp",timeout:15e3,data:s,beforeSend:function(){a.html("登录中..."),a.prop("disabled",!0)},success:function(t){var n=t.code;if(0===n){if(e.kdt._loginCB&&e.kdt._loginCB(),i.removeClass("active"),window._global&&window._global.redirect_url){var o=e.kdt.addParameter(window._global.redirect_url,{kdt_sso_token:t.data.kdt_sso_token});window.location.assign(o)}else window._global.kdt_sso_token=t.data.kdt_sso_token;motify.clear()}else motify.log(t.msg)},error:function(){motify.log("出错啦，请重试")}}).always(function(){a.html("下一步"),a.prop("disabled",!1)}):!1})}($),function(){var e=$.kdt.getParameterByName("promote");e&&$("a").each(function(){var t=$(this),i=t.attr("href");i=$.kdt.addParameter(i,{promote:e}),i&&t.attr("href",i)})}(),function(){setTimeout(function(){var e=$(".js-follow-qrcode");if(!window._global.mp_data||e.length<=0||$.kdt.isMobile()&&!$.kdt.isIPad())return!1;var t="http://open.weixin.qq.com/qr/code/?username="+window._global.mp_data.mp_weixin,i=new Image;i.width=158,i.height=158,$(i).on("load",function(){e.append(i).removeClass("loading")}),i.src=t},500)}(),function(){var e={showSubmenu:function(e){var t=$(e.target),i=t.parents(".one"),n=t.hasClass(".js-mainmenu")?t:i.find(".js-mainmenu"),o=i.find(".js-submenu"),r=o.find(".arrow"),a=t.parents(".js-navmenu"),s=a.find(".one"),l=s.length,c=s.index(i),d=n.outerWidth(),u=(o.outerWidth()-n.outerWidth())/2,f=o.outerWidth()/2;if(0===o.size())$(".js-submenu:visible").hide();else{var h=o.outerWidth(),p=i.outerWidth(),g="auto",m="auto",v="auto",w="auto";0===c?(g=n.position().left-u,m=f-r.outerWidth()/2):c===l-1&&h>p?(v=8,w=d/2-v):(g=n.position().left-u,m=f-r.outerWidth()/2);var k=5;0>g&&(m=m+g+k,g=k),0>v&&(w=w+v+k,v=k),o.css({left:g,right:v}),r.css({left:m,right:w}),$(".js-submenu:visible").not(o).hide(),o.toggle()}},openNavmenu:function(e){var t=$(".js-navmenu");t.slideToggle("fast"),$(".js-submenu:visible").hide(),$(".js-open-navmenu .caret").toggleClass("up-arrow"),e.stopPropagation()}};$(document).on("click",function(){$(".js-submenu:visible").hide(0),$(".js-open-navmenu .caret").removeClass("up-arrow")}),$("body").on("click",".js-navmenu",function(e){e.fromMenu=!0,$.kdt.clickLogHandler.call(e.target,e),e.stopPropagation()}),$("body").on("click",".js-submenu",function(e){e.fromMenu=!0,$.kdt.clickLogHandler.call(e.target,e),e.stopPropagation()}),$("body").on("click",".js-mainmenu",function(t){e.showSubmenu(t)}),$("body").on("click",".js-open-navmenu",function(t){e.openNavmenu(t)});var t=".nav-on-bottom",i=$(".js-custom-paginations");$(t).size()+i.size()>0&&$("body").css("padding-bottom",$(".js-navmenu").height()||i.height())}(),function(e,t){function i(){e(".motify").length?this.$el=e(".motify"):(this.$el=e('<div class="motify"><div class="motify-inner"></div></div>'),e("body").append(this.$el))}i.prototype={log:function(e,t,i){this.clear(),this.$el.find(".motify-inner").html(e),this.$el.show(),this.hide(t,i)},hide:function(e,i){var n=this,o=e||2e3;o>0&&(n.$el.removeClass("motifyFx"),t.clearTimeout(n.hideTimer),n.hideTimer=t.setTimeout(function(){n.$el.addClass("motifyFx"),i&&i.apply(n),n.clear()},"function"!=typeof i?o:o+300))},clear:function(){this.$el.hide().removeClass("motifyFx")}},t.motify=t.motify||new i}($,window,document);var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function i(e,t){var i,n,o,r,a,s,l,c,d,u,f,h=t&&t.split("/"),p=g.map,m=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(h=h.slice(0,h.length-1),e=e.split("/"),a=e.length-1,g.nodeIdCompat&&k.test(e[a])&&(e[a]=e[a].replace(k,"")),e=h.concat(e),d=0;d<e.length;d+=1)if(f=e[d],"."===f)e.splice(d,1),d-=1;else if(".."===f){if(1===d&&(".."===e[2]||".."===e[0]))break;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||m)&&p){for(i=e.split("/"),d=i.length;d>0;d-=1){if(n=i.slice(0,d).join("/"),h)for(u=h.length;u>0;u-=1)if(o=p[h.slice(0,u).join("/")],o&&(o=o[n])){r=o,s=d;break}if(r)break;!l&&m&&m[n]&&(l=m[n],c=d)}!r&&l&&(r=l,s=c),r&&(i.splice(0,s,r),e=i.join("/"))}return e}function n(t,i){return function(){var n=w.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),d.apply(e,n.concat([t,i]))}}function o(e){return function(t){return i(t,e)}}function r(e){return function(t){h[e]=t}}function a(i){if(t(p,i)){var n=p[i];delete p[i],m[i]=!0,c.apply(e,n)}if(!t(h,i)&&!t(m,i))throw new Error("No "+i);return h[i]}function s(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function l(e){return function(){return g&&g.config&&g.config[e]||{}}}var c,d,u,f,h={},p={},g={},m={},v=Object.prototype.hasOwnProperty,w=[].slice,k=/\.js$/;u=function(e,t){var n,r=s(e),l=r[0];return e=r[1],l&&(l=i(l,t),n=a(l)),l?e=n&&n.normalize?n.normalize(e,o(t)):i(e,t):(e=i(e,t),r=s(e),l=r[0],e=r[1],l&&(n=a(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:n}},f={require:function(e){return n(e)},exports:function(e){var t=h[e];return"undefined"!=typeof t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:l(e)}}},c=function(i,o,s,l){var c,d,g,v,w,k,b=[],y=typeof s;if(l=l||i,"undefined"===y||"function"===y){for(o=!o.length&&s.length?["require","exports","module"]:o,w=0;w<o.length;w+=1)if(v=u(o[w],l),d=v.f,"require"===d)b[w]=f.require(i);
else if("exports"===d)b[w]=f.exports(i),k=!0;else if("module"===d)c=b[w]=f.module(i);else if(t(h,d)||t(p,d)||t(m,d))b[w]=a(d);else{if(!v.p)throw new Error(i+" missing "+d);v.p.load(v.n,n(l,!0),r(d),{}),b[w]=h[d]}g=s?s.apply(h[i],b):void 0,i&&(c&&c.exports!==e&&c.exports!==h[i]?h[i]=c.exports:g===e&&k||(h[i]=g))}else i&&(h[i]=s)},requirejs=require=d=function(t,i,n,o,r){if("string"==typeof t)return f[t]?f[t](i):a(u(t,i).f);if(!t.splice){if(g=t,g.deps&&d(g.deps,g.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=o,o=r),o?c(e,t,i,n):setTimeout(function(){c(e,t,i,n)},4),d},d.config=function(e){return d(e)},requirejs._defined=h,define=function(e,i,n){i.splice||(n=i,i=[]),t(h,e)||t(p,e)||(p[e]=[e,i,n])},define.amd={jQuery:!0}}(),require&&require.config({baseUrl:window._global.url.cdn_static});