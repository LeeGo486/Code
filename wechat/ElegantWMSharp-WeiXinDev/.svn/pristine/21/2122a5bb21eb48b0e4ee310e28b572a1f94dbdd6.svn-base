@{
    ViewBag.Title = "夏季新品";
    Layout = "~/Views/Shared/_DLWXSiteLayout.cshtml";
}
@section script{
    <link href="~/Areas/DLWXSite/Resources/Mobile.css?v3" rel="stylesheet" />
    <style type="text/css">
        .iosSlider {
            width: 100%;
            /*min-height: 150px;*/
            /*min-height: 150px;*/
            position: relative;
            overflow: hidden;
            background: #ccc;
        }

            .iosSlider .slider {
                min-height: 150px;
                width: 100%;
                height: 100%;
            }

                .iosSlider .slider .item {
                    height: auto;
                    width: 100%;
                }

                    .iosSlider .slider .item img {
                        width: 100%;
                    }

        .iosSliderButtons {
            position: absolute;
            bottom: 10px;
            left: 10px;
            width: 200px;
            height: 10px;
        }

            .iosSliderButtons .button {
                float: left;
                width: 9px;
                height: 9px;
                background: #666;
                margin: 0 10px 0 0;
                opacity: 0.25;
                filter: alpha(opacity:25);
                border: 1px solid #000;
                border-radius: 10px;
            }

            .iosSliderButtons .selected {
                background: #fff;
                opacity: 1;
                filter: alpha(opacity:100);
            }
    </style>
    <script type="text/javascript">
        $(function () {
            $(".iosSlider").iosSlider({
                desktopClickDrag: true,
                snapToChildren: true,
                snapSlideCenter: true,
                infiniteSlider: true,
                onSlideChange: slideContentChange,
                onSliderLoaded: slideContentLoaded,
                autoSlide: true,
                autoSlideTimer: 3000,
                autoSlideTransTimer: 750
            });

            var winWidth = 0;
            var winHeight = 0;
            if (window.innerWidth)
                winWidth = window.innerWidth;
            else if ((document.body) && (document.body.clientWidth))
                winWidth = document.body.clientWidth;
            //获取窗口高度
            if (window.innerHeight)
                winHeight = window.innerHeight;
            else if ((document.body) && (document.body.clientHeight))
                winHeight = document.body.clientHeight;
            //通过深入Document内部对body进行检测，获取窗口大小
            if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth) {
                winHeight = document.documentElement.clientHeight;
                winWidth = document.documentElement.clientWidth;
            }

            $(".iosSlider").height(winHeight / 3);

            function slideContentChange(args) {
                $(args.sliderObject).parent().find(".iosSliderButtons .button").removeClass("selected");
                $(args.sliderObject).parent().find(".iosSliderButtons .button:eq(" + (args.currentSlideNumber - 1) + ")").addClass("selected");

            }
            function slideContentLoaded(args) {
                $(args.sliderObject).parent().find(".iosSliderButtons .button").removeClass("selected");
                $(args.sliderObject).parent().find(".iosSliderButtons .button:eq(" + (args.currentSlideNumber - 1) + ")").addClass("selected");
            }

            var width = 0;
            $(".iosSliderButtons .button").each(function () {
                width = width + $(this).outerWidth(true);
            })
            $(".iosSliderButtons").width(width);
            $(".iosSliderButtons").css("left", (winWidth - width) / 2);

            var evt = "onorientationchange" in window ? "orientationchange" : "resize";

            window.addEventListener(evt, function () {
                switch (window.orientation) {
                    case 0:
                        $(".iosSliderButtons").css("left", (winWidth - width) / 2);
                        break;
                    case -90:
                        $(".iosSliderButtons").css("left", (winWidth - width) / 2);
                        break;
                    case 90:
                        $(".iosSliderButtons").css("left", (winWidth - width) / 2);
                        break;
                    case 180:
                        $(".iosSliderButtons").css("left", (winWidth - width) / 2);
                        break;
                }
            }, false);
        });
    </script>

}

<ul style="padding: 0px; margin-bottom: 45px">
    <li>
        <div class="iosSlider">
            <div class="slider">
                @foreach (ElegantWM.WeiXin.MsgEntity.WxItem item in ViewBag.ImgList)
                {
                    <div class="item">
                        @*<img src="~/Content/MaterialImage/@ViewBag.Sid/@{@item.content.news_item.First().thumb_media_id}.jpg"
                            onclick="window.location.href='@item.content.news_item.First().url'">*@
                      <img src="~/Content/MaterialImage/@ViewBag.Sid/@{@item.content.news_item.First().thumb_media_id}.jpg" 
                            onclick="window.location.href='/DLWXSite/DLGoods/News?sid=@ViewBag.Sid&media_id=@{@item.media_id}'"/>
                    </div>
                }
            </div>
            <div class="iosSliderButtons">
                @foreach (ElegantWM.WeiXin.MsgEntity.WxItem item in ViewBag.ImgList)
                {
                    <div class="button"></div>
                }
            </div>
        </div>
        <li class="split"></li>
    <li>
        <img id="Holiday" src="~/Areas/DLWXSite/Resources/images/Goods/Holiday.jpg" /></li>
    <li class="split"></li>
    <li>
        <img id="BeachAnecdotes" src="~/Areas/DLWXSite/Resources/images/Goods/BeachAnecdotes.jpg" /></li>
    <li class="split"></li>
    <li>
        <img id="Oxygenclosetoskin" src="~/Areas/DLWXSite/Resources/images/Goods/Oxygenclosetoskin.jpg" /></li>
    <li class="split"></li>
    <li>
        <img id="StarlightButterfly" src="~/Areas/DLWXSite/Resources/images/Goods/StarlightButterfly.jpg" /></li>
    <li class="split"></li>
    <li>
        <img id="PolkaDot" src="~/Areas/DLWXSite/Resources/images/Goods/PolkaDot.jpg" /></li>
    <li class="split"></li>
    <li>
        <img id="TropicalTour" src="~/Areas/DLWXSite/Resources/images/Goods/TropicalTour.jpg" /></li>
    <li class="split"></li>
</ul>

<script type="text/javascript">

    $("#Holiday").click(function () {
        window.location.href = "/DLWXSite/DLGoods/SKUList?styl_type=T2015002&name=Holiday&sid=" + Url.get("sid") + "&oid=" + Url.get("oid");
    })
    $("#BeachAnecdotes").click(function () {
        window.location.href = "/DLWXSite/DLGoods/SKUList?styl_type=T2015002&name=BeachAnecdotes&sid=" + Url.get("sid") + "&oid=" + Url.get("oid");
    })
    $("#Oxygenclosetoskin").click(function () {
        window.location.href = "/DLWXSite/DLGoods/SKUList?styl_type=T2015002&name=Oxygenclosetoskin&sid=" + Url.get("sid") + "&oid=" + Url.get("oid");
    })

    $("#StarlightButterfly").click(function () {
        window.location.href = "/DLWXSite/DLGoods/SKUList?styl_type=T2015002&name=StarlightButterfly&sid=" + Url.get("sid") + "&oid=" + Url.get("oid");
    })
    $("#PolkaDot").click(function () {
        window.location.href = "/DLWXSite/DLGoods/SKUList?styl_type=T2015002&name=PolkaDot&sid=" + Url.get("sid") + "&oid=" + Url.get("oid");
    })
    $("#TropicalTour").click(function () {
        window.location.href = "/DLWXSite/DLGoods/SKUList?styl_type=T2015002&name=TropicalTour&sid=" + Url.get("sid") + "&oid=" + Url.get("oid");
    })
</script>
